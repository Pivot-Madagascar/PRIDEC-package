[{"path":"https://pivot-madagascar.github.io/PRIDEC-package/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 PRIDEC authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"the-demo-data","dir":"Articles","previous_headings":"","what":"The demo data","title":"PRIDEC","text":"demo data simulated malaria case data Ifanadiana District, Madagascar collected level health center. includes information data monthly case counts, rainfall, temperature, socio-economic levels, elevation, mosquito net use, geographic isolation. Generally, value want predict referred y_var API calls, predictor variables referred pred_vars. includes associated dataset spatial polygons representing health facility catchment. plot time series four example health centers.","code":"data(\"demo_malaria\") data(\"demo_polygon\")  demo_malaria |>   filter(orgUnit %in% sample(unique(orgUnit), 4)) |>   mutate(date = as.Date(paste0(period,\"01\"), format = \"%Y%m%d\")) |>   ggplot(aes(x = date, y = n_case)) +   geom_line() +   facet_wrap(~orgUnit, scales = \"free\") +   ylab(\"Number of cases\")"},{"path":[]},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"prep_data","dir":"Articles","previous_headings":"Data Processing","what":"prep_data()","title":"PRIDEC","text":"first step process clean data. PRIDE-C forecasting workflow four steps prepare data model: lag predictors: order predict future, must use lagged values predictor variables, number cases predicted function variable time t-lag normalize predictors: predictor variables centered scaled help model convergence Impute missing predictors: missing values predictor variables imputed via seasonal imputation create spatial structure: one model fitting approaches (INLA) uses spatial structure data help predict. structure created via matrix identifies neighbors polygon. data preparation step done via prep_data() function. choose lag dynamic predictor variables scale predictor variables. prep_data() returns three elements list: W_graph: object containing spatial structure data required INLA data_prep: data.frame cleaned processed data scale_factors: data.frame center scaling factors used normalize predictor variables. used explorign variables later.","code":"prep_output <- prep_data(raw_data = demo_malaria,                       y_var = \"n_case\",                       lagged_vars = c(\"pev\", \"rain_mm\", \"temp_c\"),                       scaled_vars = c(\"pev\", \"rain_mm\", \"temp_c\",                                       \"wealth_index\", \"elevation\",                                       \"time_to_district\"),                       lag_n = 3,                       graph_poly = demo_polygon) #> Registered S3 method overwritten by 'quantmod': #>   method            from #>   as.zoo.data.frame zoo"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"split_cv_rolling","dir":"Articles","previous_headings":"Data Processing","what":"split_cv_rolling()","title":"PRIDEC","text":"data prepared, needs split multiple cross-validation sets (cv_set). cv_set contains analysis assessment dataset used model training. cv_sets created via rolling origin splits (Tashman 2000.) cv_set can thought individual test workflow’s ability forecast, model fit analysis data following specified pred_vars model parameters performance assessed assessment data.Generally, analysis data corresponds longer period historical data used training, assessment data corresponds actual forecast horizon relevant user. use 5 years analysis data train model, 3 months assessment data test . function split_cv_rolling return list, element corresponds one cv_set. can inspect cv_set better understand structure data:","code":"splits_out <- split_cv_rolling(prep_output$data_prep,                                month_analysis = 60,                                month_assess = 3) lapply(splits_out[[24]], head) #> $analysis #> # A tibble: 6 × 28 #>   orgUnit   n_case   pev rain_mm temp_c wealth_index elevation LLIN_use csb_type #>   <chr>      <int> <dbl>   <dbl>  <dbl>        <dbl>     <dbl>    <dbl> <chr>    #> 1 CSB1 AMB…      2  14.4   0       22.4         2.53      381.    0.290 CSB1     #> 2 CSB1 AMB…      5  15.4   0.527   24.5         2.53      381.    0.290 CSB1     #> 3 CSB1 AMB…      2  12.7 164.      25.1         2.53      381.    0.290 CSB1     #> 4 CSB1 AMB…     16  15.7 309.      25.8         2.53      381.    0.290 CSB1     #> 5 CSB1 AMB…     29  14.3 289.      25.2         2.53      381.    0.290 CSB1     #> 6 CSB1 AMB…      1  13.8 169.      25.1         2.53      381.    0.290 CSB1     #> # ℹ 19 more variables: time_to_district <dbl>, LLIN_wane <dbl>, period <int>, #> #   date <date>, pev_lag <dbl>, rain_mm_lag <dbl>, temp_c_lag <dbl>, #> #   pevsc <dbl>, pev_lagsc <dbl>, rain_mmsc <dbl>, rain_mm_lagsc <dbl>, #> #   temp_csc <dbl>, temp_c_lagsc <dbl>, wealth_indexsc <dbl>, #> #   elevationsc <dbl>, time_to_districtsc <dbl>, month_season <fct>, #> #   month_num <dbl>, org_ID <int> #>  #> $assessment #> # A tibble: 6 × 28 #>   orgUnit   n_case   pev rain_mm temp_c wealth_index elevation LLIN_use csb_type #>   <chr>      <int> <dbl>   <dbl>  <dbl>        <dbl>     <dbl>    <dbl> <chr>    #> 1 CSB1 AMB…      3  17.3     0     21.9         2.53      381.    0.290 CSB1     #> 2 CSB1 AMB…      7  26.5    65.9   25.0         2.53      381.    0.290 CSB1     #> 3 CSB1 AMB…     11  23.1   156.    26.0         2.53      381.    0.290 CSB1     #> 4 CSB1 AMB…      5  13.9     0     20.9         2.82      614.    0.318 CSB1     #> 5 CSB1 AMB…      3  21.3    66.9   24.2         2.82      614.    0.318 CSB1     #> 6 CSB1 AMB…     11  17.3   188.    24.9         2.82      614.    0.318 CSB1     #> # ℹ 19 more variables: time_to_district <dbl>, LLIN_wane <dbl>, period <int>, #> #   date <date>, pev_lag <dbl>, rain_mm_lag <dbl>, temp_c_lag <dbl>, #> #   pevsc <dbl>, pev_lagsc <dbl>, rain_mmsc <dbl>, rain_mm_lagsc <dbl>, #> #   temp_csc <dbl>, temp_c_lagsc <dbl>, wealth_indexsc <dbl>, #> #   elevationsc <dbl>, time_to_districtsc <dbl>, month_season <fct>, #> #   month_num <dbl>, org_ID <int>"},{"path":[]},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"modeling-approaches","dir":"Articles","previous_headings":"Model Training","what":"Modeling approaches","title":"PRIDEC","text":"five modeling approaches built PRIDE-C forecasting workflow:","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"naive","dir":"Articles","previous_headings":"Model Training > Modeling approaches","what":"naive","title":"PRIDEC","text":"naive model can thought null model compare forecasting approaches . creates forecasts equal historical averages based grouping variables, default month year orgUnit. use predictor variables predictions.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"arimax","dir":"Articles","previous_headings":"Model Training > Modeling approaches","what":"arimax","title":"PRIDEC","text":"ARIMAX model ARIMA model fit exogeneous variables fit individually orgUnit. exogeneous variables must dynamic temporal resolution case data. ARIMAX model fit using forecast::auto.arima() function. Initial models fit using full list provided pred_vars, iteratively removed (beginning end list) model successfully converges. Data log-transformed within function help fitting, forecasts provided response-scale.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"glm_nb","dir":"Articles","previous_headings":"Model Training > Modeling approaches","what":"glm_nb","title":"PRIDEC","text":"generalized linear model negative binomial distribution can fit full dataset. includes variable control orgUnit month year, addition specified predictor variables. can thought naive model exogenous predictors. Predictor variables can either dynamic constant within orgUnit, allowing inclusion socio-demographic topographical variables. model fit via MASS::glm.nb() function.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"ranger","dir":"Articles","previous_headings":"Model Training > Modeling approaches","what":"ranger","title":"PRIDEC","text":"random forest quantile regression model implemented via ranger package. package chosen ability apply quantile regression, speed, high-performance default hyper-parameters. Three hyper-parameters (m.try, min.node.size, num.trees) can tuned tune_ranger() function. Predictor variables can either dynamic constant within orgUnit, allowing inclusion socio-demographic topographical variables. includes variable control orgUnit month year, addition specified predictor variables.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"inla","dir":"Articles","previous_headings":"Model Training > Modeling approaches","what":"inla","title":"PRIDEC","text":"approximate Bayesian model fit via Integrated Nested Laplace Approximation via inla package. Note package available CRAN installed following installation instructions. computationally intense model, includes temporal spatial random effect structures. temporal random effects included via cyclical random walk annual seasonality, nested within orgUnit. spatial structure defined Besag-York-Mollié (BYM) model. autoregressive spatial model based neighborhood spatial structure orgUnits. Priors can provided random effects via hyper_priors argument fit_inla. future, functionality added tune hyper-parameters.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/articles/PRIDEC.html","id":"training-workflow","dir":"Articles","previous_headings":"","what":"Training Workflow","title":"PRIDEC","text":"modeling approach follows training workflow: tune_*: tuning hyperparameters (ranger ) fit_*: fitting models multiple cv_sets eval_performance: evaluation models analysis assessment datasets inv_variables_*: investigation variable importance scores counterfactual plots visualize association predictor variables workflow can launched multiple approaches returns quarto report model performance variable investigation via train_models function.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Michelle Evans. Author, maintainer.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Evans M (2025). PRIDEC: Disease Forecasting PRIDE-C. R package version 0.0.0.9000, https://pivot-madagascar.github.io/PRIDEC-package/.","code":"@Manual{,   title = {PRIDEC: Disease Forecasting with PRIDE-C},   author = {Michelle Evans},   year = {2025},   note = {R package version 0.0.0.9000},   url = {https://pivot-madagascar.github.io/PRIDEC-package/}, }"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/index.html","id":"predicting-infectious-diseases-via-environment-and-climate-pride-c","dir":"","previous_headings":"","what":"Disease Forecasting with PRIDE-C","title":"Disease Forecasting with PRIDE-C","text":"goal PRIDE-C provide standardized API functionality forecasting infectious diseases DHIS2 data.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Disease Forecasting with PRIDE-C","text":"can install development version PRIDEC GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"Pivot-Madagascar/PRIDEC-package\")"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Disease Forecasting with PRIDE-C","text":"TThe PRIDE-C forecasting approach follows following steps: Data processing Model tuning training Forecasting  example follows steps fitting Random Forest model using ranger simulated model data.","code":"library(PRIDEC)  data(demo_malaria)  #preprocess data set data_clean <- prep_data(raw_data = demo_malaria,                         y_var = \"n_case\",                         lagged_vars =  c(\"rain_mm\", \"temp_c\"),                         scaled_vars = NULL,                         graph_poly = NULL) #> Registered S3 method overwritten by 'quantmod': #>   method            from #>   as.zoo.data.frame zoo #create a cv_fold of assessment (historical) and analysis (forecast) data cv_set <- split_cv_rolling(data_clean$data_prep,                             month_analysis = 48,                             month_assess=3)[[20]]  #fit the model and forecast rf_fit <- fit_ranger(cv_set,                       y_var = \"n_case\",                      id_vars = c(\"orgUnit\", \"date\"),                      pred_vars = c(\"rain_mm\", \"temp_c\", \"month_season\", \"orgUnit\"))  #evaluate model fit eval_performance(rf_fit) #> Registered S3 method overwritten by 'scoringutils': #>   method         from     #>   print.forecast forecast #> # A tibble: 2 × 10 #>   dataset    wis   mae med_ae mean_ae_log  wape dispersion sp_rho prop_over #>   <chr>    <dbl> <dbl>  <dbl>       <dbl> <dbl>      <dbl>  <dbl>     <dbl> #> 1 analysis  5.86  6.42  0.321      0.0220 0.150       5.12  0.961    0.206  #> 2 assess   24.4  33.1  32.2        1.08   0.608       2.34  0.814    0.0317 #> # ℹ 1 more variable: prop_under <dbl> plot_predictions(rf_fit[rf_fit$orgUnit %in% sample(rf_fit$orgUnit,1),]) #> Warning: Removed 1 row containing missing values or values outside the scale range #> (`geom_point()`)."},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/index.html","id":"contribute-to-pride-c","dir":"","previous_headings":"","what":"Contribute to PRIDE-C","title":"Disease Forecasting with PRIDE-C","text":"open-source package, welcome contributions. Please feel free file issue contact developer (@mvevans89).","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/index.html","id":"funding","dir":"","previous_headings":"","what":"Funding","title":"Disease Forecasting with PRIDE-C","text":"development maintenance package funded Wellcome Trust Digital Technology Development Award.","code":""},{"path":[]},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"development-workflow","dir":"","previous_headings":"","what":"Development workflow","title":"Lab notebook for PRIDEC Package","text":"use devtools usethis packages use_r(): creates R script filename hold function use_test(): creates R script hold tests function use_package(): adds package Import DESCRIPTION. call functions using package::function use_import_from(): imports specific function package use without ::. recommended. test(): runs code tests document(): update package documentation build_readme(): builds README. better use becuase uses source version package load_all(): builds loads package locally check(): runs CRAN tests make sure okay install(): install source version package info, use R packages book.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-02-26","dir":"","previous_headings":"","what":"2025-02-26","title":"Lab notebook for PRIDEC Package","text":"Okay adjusting variable importance functions theyd o return negative importance values normalized sum 1. Also adding tests . arima okay. glm fixed. inla already okay ranger already okay Quarto doc okay way set height dynamically use following essentially putting !expr r code. : - add code turn negative variable importance zero ensure sums 1 [need done model] - arima model doesn’t save cv_fold info. actually none [now solved within quarto doc since don’t use elsewhere] - add cli train_model return log output. Maybe create log results_dir - figure actually render quarto doc - fix setting height figure quarto template","code":"#| output: true #| fig-height: !expr num_plots*2 #| out-height: !expr paste0(num_plots*2, \"in\")"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-02-25","dir":"","previous_headings":"","what":"2025-02-25","title":"Lab notebook for PRIDEC Package","text":"Continuing quarto template. Finding issues underlying functions making note change later. ’m mostly just sure best way render quarto doc function. Like, need copied somewhere? text just read saved text object R? something look . : - add code turn negative variable importance zero ensure sums 1 [need done model] - arima model doesn’t save cv_fold info. actually none [now solved within quarto doc since don’t use elsewhere] - add cli train_model return log output. Maybe create log results_dir - figure actually render quarto doc - fix setting height figure quarto template","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-02-24","dir":"","previous_headings":"","what":"2025-02-24","title":"Lab notebook for PRIDEC Package","text":"Working quarto template. think probably want called seperate function just takes results_dir first one trains models. : - add code turn negative variable importance zero ensure sums 1","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-02-19","dir":"","previous_headings":"","what":"2025-02-19","title":"Lab notebook for PRIDEC Package","text":"Working train_models workflow. Finished models inla glm_nb. think just need launch create quarto doc function. Probably easiest test quarto doc function , given results_dir. ran code make demo scratch directory","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-02-12","dir":"","previous_headings":"","what":"2025-02-12","title":"Lab notebook for PRIDEC Package","text":"Working train_models workflow, fits multiple models outputs 1: directory results saved 2: quarto doc containing info model performance. Okay, gotten working fitting naive, RF, Arima. Now need add INLA GLM_NB. add quarto doc creation (can use template ). : - write example vignette full workflow [progress] - script create quarto document training step (like launching shell script). similar output workshops. train_models function now. - variable importance functions arimax [done] back-burner: - data import export scripts DHIS2 (need get d2 working first) - INLA hyper-parameter tuning (later) - variable investigation naive fit (need ?) - functionality running train_models parallel (future_map vs map)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-02-11","dir":"","previous_headings":"","what":"2025-02-11","title":"Lab notebook for PRIDEC Package","text":"work vignette full workflow multiple models trained. also allow write full wrapper/workflow function. Okay, yes working realized need wrapper train_models function. takes data user-provided parameters outputs quarto report. Notes self (train_model function ): - takes cv_set list, list models fit, list pred_vars, y_var, results_directory - applies model element list get evaluation - gets inv_var last cv_set - saves model outputs somewhere - launches script create quarto doc model output may also help streamline ensemble_forecast function. Atlhough think realistically streamlining happen within script within docker container, since user-input enter. : - INLA hyper-parameter tuning (later) - write example vignette full workflow - script create quarto document training step (like launching shell script). similar output workshops - data import export scripts DHIS2 (need get d2 working first)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-02-10","dir":"","previous_headings":"","what":"2025-02-10","title":"Lab notebook for PRIDEC Package","text":"Working setting things github pkgdown website. fixed github commit error. problem using wrong email. Setting github pages, also making Pivot website nicer. : - INLA hyper-parameter tuning (later) - write example vignette full workflow - script create quarto document training step (like launching shell script). similar output workshops - data import export scripts DHIS2 (need get d2 working first)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-02-07","dir":"","previous_headings":"","what":"2025-02-07","title":"Lab notebook for PRIDEC Package","text":"Working creating documentation ultimately maybe even pushing things github. Also started writing function ensemble_forecast. stacked ensemble, ways getting weighted coefficients like blending via lasso regression, one allows us use participant input. also working uploading everything github gettinga working website. : - make map/workflow APIs - INLA hyper-parameter tuning (later) - build launch model function based map - upload github - write example vignette - script create quarto document training step (like launching shell script)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-02-06","dir":"","previous_headings":"","what":"2025-02-06","title":"Lab notebook for PRIDEC Package","text":"Going back INLA code finish . Working creating counterfactual data function. combined variable importance one one function keep standard API. : - make map/workflow APIs - INLA hyper-parameter tuning (later) - build launch model function based map","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-29","dir":"","previous_headings":"","what":"2025-01-29","title":"Lab notebook for PRIDEC Package","text":"Working adding INLA modules. far transfered model code variable importance. Still need code counter-factual plots function together match API models. may also want add tuning? also got note many non-default packages move suggests use conditionally. think probably done module (example add check required packages installed module prompt ). Hweover add work potnetial break points end users may familiar R. Something think can updated later. : - INLA model: - finish counterfactual plots explorign variables - Tuning hyperparameters (can also later) - code launching models (running multiple) [probably function]. See notes . - code creating ensemble","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-28","dir":"","previous_headings":"","what":"2025-01-28","title":"Lab notebook for PRIDEC Package","text":"Added functionality log-transform arimax. certain instances, seems perform better predictions (makes sense poisson processes). controlled via log_trans param. Starting work glm.nb model MASS package. code variable selection variable dropped certain order tune model, going move package. also code estimate prediction inteval via simulations, stick analytically think cleaner. ’m going wait INLA stuff tomorrow. meantime thinking write script launch ensemble models. bunhc make scripts 3rd workshop, think need turn R scripts. leave something called via sh script arguments command line (probably best interacting ETL). model fitting, something similar fit_models_template.R, fits disease. takes file data file containing names predictor variables (maybe just provided strings), well name disease, used identify y_var. probably also need directory output (currently manually set). also needs info variables lag scale, perhaps step adjust turn predictor variables. probably also take names models fit (naive, glm, ranger,inla, arimax). Maybe look DHIS2 get idea, likely need passed docker container. : - look log-transforming ARIMAX: idea add argument function - GLM model: shouldn’t bad set since tuning (1/2 day?) - INLA model: probably take 1-2 days , especially want add tuning hyper-parameters. - code launching models (running multiple) [probably function] - code creating ensemble","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-24","dir":"","previous_headings":"","what":"2025-01-24","title":"Lab notebook for PRIDEC Package","text":"Working Ranger RF function. one little complicated can involve tuning variable importance. Okay, get working, something bit confusing nestedness estimate variable importance. best probably provide info provide initial fitting function one can call . can maybe done .... Also needed create visualizations making since includes counter-factual plots also plot predictions. made ranger tuning function. can used basis tuning INLA want, like follow API structure : - look log-transforming ARIMAX: idea add argument function - GLM model: shouldn’t bad set since tuning (1/2 day?) - INLA model: probably take 1-2 days , especially want add tuning hyper-parameters. - code launching models (running multiple) - code creating ensemble","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-22","dir":"","previous_headings":"","what":"2025-01-22","title":"Lab notebook for PRIDEC Package","text":"Finally got data documentation work. two things (sure fixed ), changed name script holding data documentation data.R added string data name roxygen stuff. issue can’t figure add multiple script? Ah okay just needed empty line one create seperate thing one. work okay now. : - document demo data (demo_malaria, demo_polygon) - Finish ARIMAX: Evaluation function - start ranger/RF function","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-21","dir":"","previous_headings":"","what":"2025-01-21","title":"Lab notebook for PRIDEC Package","text":"Okay current evaluation function work arimax model, although results lot error messages. think best way solve move away scoringutils package. decided use intermediate wis function already bunch stuff built didn’t want recreate. now using directly data don’t get error messages. much slower now though becuase didn’t vectorize , rewrote take better advantage vectorizing . Also cleaned undefined variables bits existing functions. : - document demo data (demo_malaria, demo_polygon) [sure isn’t currently working] - Finish ARIMAX: Evaluation function - start ranger/RF function","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-17","dir":"","previous_headings":"","what":"2025-01-17","title":"Lab notebook for PRIDEC Package","text":"Start work ARIMAX model. ARIMA fits one orgUnit time bunch internal functions, means donea bunch trouble-shooting. One issue forecast package conflict new scoringutils package. get error load_all(): don’t want forecast method overwritten package hosts ARIMA functions. One solution use 3-colon ::: access functions aren’t exported. issue type print. method. Nope wasn’t . still messing print methods, just wrapped suppressWarnings now get_arima_pi function, think probably best long term solution replace scoringutils function. Running tests, now becuase ahve switched using .data$ NSE unnamed variables, now gives error message Use .data tidyselect expressions deprecated tidyselect 1.2.0., sure best way use within package. Info :https://forum.posit.co/t/use--data--tidyselect-expressions--now-deprecated/150092/5 need switch using all_of plus character names columns, like `all_of(c(“s1”,“x2”,“x_new” = “x_old”)). Okay, think solved dumb testing errors took way long. guess just used base R rather dply : - document demo data (demo_malaria, demo_polygon) [sure isn’t currently working] - create util function just check y_var, pred_var, data arguments okay. can run modeling functions. - Finish ARIMAX: Evaluation function - start ranger/RF function","code":"Registered S3 method overwritten by 'scoringutils':   method         from   print.forecast forecast"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-16","dir":"","previous_headings":"","what":"2025-01-16","title":"Lab notebook for PRIDEC Package","text":"Working evaluation code, particularly calculation WIS. plan write function double check scoringutils works. Eh, now just stick using scoringutils can transition soemthing different later want. : - write test naive model - document demo data (demo_malaria, demo_polygon) [sure isn’t currently working] - finish naive model - start ARIMAX model functions","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-14","dir":"","previous_headings":"","what":"2025-01-14","title":"Lab notebook for PRIDEC Package","text":"Starting work modeling functions. want language/API call model, fit: fits list containing analysis assessment data (basically trains analysis predicts analysis assessment). Returns prediction intervals sets. evaluate: takes data.frame prediction intervals true_values returns performance metrics (ae_median, r2, mae_scaled, interval_score, estimation). performance metrics available models. basically runs fit evaluate multiple times identify best tuned model investigate: investigates variablbes model (counter-factual plots, coefficients, etc.) CV_set list object contains analysis assessment data.frame used train model predict, respectively evaluate step uses functionality scoringutils package, isn’t quite flexible enough need worried going change, going use intermediate functions . Actually, end just updated scoringutils version use going since exists functionality automatically calculating scores. future version write , kind trust epiforecast group keep track well. Okay, actually now thing really using wis (weighted interval score), kind feel like calculate using intermediate function scoringutils, go back . : - document demo data (demo_malaria, demo_polygon) - start naive modeling function [started currently working evaluation step] - finish evaluation code (particularly wis calculation, although maybe best just write double-check scoringutils)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-13","dir":"","previous_headings":"","what":"2025-01-13","title":"Lab notebook for PRIDEC Package","text":"Working CV split functions. ’ve got written tests, aren’t anything crazy. Also wrote tests prep_caseData functions. Started writing documents demo data, issues check picking . : - write tests seasonal_fill - write tests prep_caseData - document demo data (demo_malaria, demo_polygon) - start naive modeling function","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/notebook_pridec_pkg.html","id":"id_2025-01-08","dir":"","previous_headings":"","what":"2025-01-08","title":"Lab notebook for PRIDEC Package","text":"Started development package architecture. involves moving things modeling repo. One thing really needed able demo dataset test things . created simulated dataset malaria cases data Ifanadiana, demo_malaria, spatial polygon goes , demo_polygon. work testing everything (hopefully). worked data_prep step, now need cv_split steps finish data treatment : - cv split functions - start modeling functions (start naive glm?)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/PRIDEC-package.html","id":null,"dir":"Reference","previous_headings":"","what":"PRIDEC: Disease Forecasting with PRIDE-C — PRIDEC-package","title":"PRIDEC: Disease Forecasting with PRIDE-C — PRIDEC-package","text":"Functions used Predicting Infectious Diseases via Environment Climate (PRIDE-C) forecasting workflow forecast infectious diseases DHIS2 instances.","code":""},{"path":[]},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/PRIDEC-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"PRIDEC: Disease Forecasting with PRIDE-C — PRIDEC-package","text":"Maintainer: Michelle Evans first.last@example.com (ORCID)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/calc_inla_vi.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate variable importance in INLA via simulation — calc_inla_vi","title":"Calculate variable importance in INLA via simulation — calc_inla_vi","text":"Calculate variable importance INLA via simulation","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/calc_inla_vi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate variable importance in INLA via simulation — calc_inla_vi","text":"","code":"calc_inla_vi(   cv_set,   y_var,   pred_vars,   reff_var = NULL,   id_vars,   hyper_priors = list(prec.unstruct = c(1, 5e-04), prec.spatial = c(1, 5e-04),     prec.timerw1 = c(1, 0.01)),   W_orgUnit,   seed = 8675309,   nsims = 1 )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/calc_inla_vi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate variable importance in INLA via simulation — calc_inla_vi","text":"cv_set list object containing analysis assessment data.frames y_var string name column observed values pred_vars vector string predictor variables use model reff_var string formula random effects id_vars names columns used keys/ids data.frames hyper_priors priors spatial temporal random effects W_orgUnit graph orgUnit use spatial structure' seed seed use reproducability. Default = 8675309 nsims number simulations run. Default = 1","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/calc_inla_vi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate variable importance in INLA via simulation — calc_inla_vi","text":"dataframe variable importance scores","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/calc_pi_nb_analytic.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate glm.nb prediction interval analytically — calc_pi_nb_analytic","title":"Estimate glm.nb prediction interval analytically — calc_pi_nb_analytic","text":"Internal function get prediction intervals glm model","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/calc_pi_nb_analytic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate glm.nb prediction interval analytically — calc_pi_nb_analytic","text":"","code":"calc_pi_nb_analytic(   df,   fit,   quantile_levels = c(0.01, 0.025, seq(0.05, 0.95, by = 0.05), 0.975, 0.99) )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/calc_pi_nb_analytic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate glm.nb prediction interval analytically — calc_pi_nb_analytic","text":"df dataframe get predictions fit model fit via MASS::glm.nb quantile_levels quantiles want prediction intervals ","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/calc_pi_nb_analytic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate glm.nb prediction interval analytically — calc_pi_nb_analytic","text":"matrix prediction intervals row df","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/calc_pi_nb_analytic.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate glm.nb prediction interval analytically — calc_pi_nb_analytic","text":"based trending package, described : https://cran.r-project.org/web/packages/trending/vignettes/prediction_intervals.html","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_counterfactual_inla.html","id":null,"dir":"Reference","previous_headings":"","what":"Create counterfactual data of variables from INLA model — create_counterfactual_inla","title":"Create counterfactual data of variables from INLA model — create_counterfactual_inla","text":"Create counterfactual data variables INLA model","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_counterfactual_inla.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create counterfactual data of variables from INLA model — create_counterfactual_inla","text":"","code":"create_counterfactual_inla(   cv_set,   y_var,   pred_vars,   reff_var = NULL,   id_vars,   hyper_priors = list(prec.unstruct = c(1, 5e-04), prec.spatial = c(1, 5e-04),     prec.timerw1 = c(1, 0.01)),   W_orgUnit,   var_scales,   constant_org,   constant_date )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_counterfactual_inla.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create counterfactual data of variables from INLA model — create_counterfactual_inla","text":"cv_set list object containing analysis assessment data.frames y_var string name column observed values pred_vars vector string predictor variables use model reff_var string formula random effects id_vars names columns used keys/ids data.frames hyper_priors priors spatial temporal random effects W_orgUnit graph orgUnit use spatial structure' var_scales data.frame center scale factors used variable scaling constant_org orgUnit use counterfactual plots constant_date date use counterfactual plots","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_counterfactual_inla.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create counterfactual data of variables from INLA model — create_counterfactual_inla","text":"list dataframes counter factual data. element corresponds one predictor variable","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_demo_preds.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate a data.frame prediction interval to use in tests — create_demo_preds","title":"Simulate a data.frame prediction interval to use in tests — create_demo_preds","text":"Simulate data.frame prediction interval use tests","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_demo_preds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate a data.frame prediction interval to use in tests — create_demo_preds","text":"","code":"create_demo_preds(n_orgUnit, n_months, n_quant = 2)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_demo_preds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate a data.frame prediction interval to use in tests — create_demo_preds","text":"n_orgUnit number orgUnits n_months number months analysis data, uses 3 months assess n_quant number quantiles use prediction intervals","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_demo_preds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate a data.frame prediction interval to use in tests — create_demo_preds","text":"data.frame prediction intervals","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_pridec_quarto.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to create quarto doc from model outputs — create_pridec_quarto","title":"Function to create quarto doc from model outputs — create_pridec_quarto","text":"Function create quarto doc model outputs","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_pridec_quarto.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to create quarto doc from model outputs — create_pridec_quarto","text":"","code":"create_pridec_quarto(results_dir, html_filename)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/create_pridec_quarto.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to create quarto doc from model outputs — create_pridec_quarto","text":"results_dir path directory model outputs saved html_filename want html file saved","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/demo_malaria.html","id":null,"dir":"Reference","previous_headings":"","what":"Demo malaria datasets — demo_malaria","title":"Demo malaria datasets — demo_malaria","text":"datasets simulated data representing monthly malaria cases associated covariates District Ifanadiana, Vatovavy, Madagascar. represent 21 orgUnits 106 months data (October 2016 - July 2024). used demos internal testing.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/demo_malaria.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Demo malaria datasets — demo_malaria","text":"","code":"demo_malaria"},{"path":[]},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/demo_malaria.html","id":"demo-malaria","dir":"Reference","previous_headings":"","what":"demo_malaria","title":"Demo malaria datasets — demo_malaria","text":"data frame 2226 rows 12 columns: orgUnit DHIS2 orgUnit corresponding primary health clinics n_case Number monthly malaria cases pev Average monthly potential evapotranspiration rain_mm Total monthly rainfall temp_c Average monthly temperature wealth_index Socio-economic index elevation Elevation LLIN_use Proportion households least two LLINs per member csb_type Type clinic: CSB1 CSB2 time_to_district Travel time district capital clinic LLIN_wane Number years since LLIN distribution campaign period Year month followin DHIS2 period style (YYYYMM)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/demo_polygon.html","id":null,"dir":"Reference","previous_headings":"","what":"Demo malaria dataset polygon — demo_polygon","title":"Demo malaria dataset polygon — demo_polygon","text":"Polygons used spatial mesh INLA examples","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/demo_polygon.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Demo malaria dataset polygon — demo_polygon","text":"","code":"demo_polygon"},{"path":[]},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/demo_polygon.html","id":"demo-polygon","dir":"Reference","previous_headings":"","what":"demo_polygon","title":"Demo malaria dataset polygon — demo_polygon","text":"simple feature geospatial collection used sf. used examples INLA models. orgUnit DHIS2 orgUnit corresponding primary health clinics org_ID numeric id corresponding orgUnit used internally INLA geom geometry polygon associated orgUnit","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/demo_polygon.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Demo malaria dataset polygon — demo_polygon","text":"PRIDE-C research team","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/ensemble_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit an ensemble forecast — ensemble_forecast","title":"Fit an ensemble forecast — ensemble_forecast","text":"Fit ensemble forecast","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/ensemble_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit an ensemble forecast — ensemble_forecast","text":"","code":"ensemble_forecast(   cv_set,   y_var,   id_vars,   quantile_levels = c(0.025, 0.5, 0.975),   inla_configs = NULL,   glm_nb_configs = NULL,   ranger_configs = NULL,   arimax_configs = NULL,   naive_configs = NULL )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/ensemble_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit an ensemble forecast — ensemble_forecast","text":"cv_set list analysis assessment data forecast y_var name y variable id_vars name columns used identify sample. Usually time period orgUnit quantile_levels quantile level prediction intervals. Default = c(0.025, 0.5,0.975) corresponding 95% CI inla_configs named list configuration INLA model. Must include: reff_var, pred_vars, hyper_priors, W_orgUnit, sample_pi. See fit_inla info. NULL (default), fit inla model. glm_nb_configs named list configuration GLM model. Must include: pred_vars ranger_configs named list configuation ranger model. Must include: pred_vars, hyper_control. See fit_ranger info. arimax_configs named list configuration ARIMAX model. Must include: pred_vars, log_trans. See fit_arima info. naive_configs named list configuration naive model. Must include: group_vars. See fit_naive info.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/ensemble_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit an ensemble forecast — ensemble_forecast","text":"Dataframe prediction intervals ensembled predictions","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/eval_performance.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluate performance on a cv_set — eval_performance","title":"Evaluate performance on a cv_set — eval_performance","text":"Evaluate performance cv_set","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/eval_performance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluate performance on a cv_set — eval_performance","text":"","code":"eval_performance(pred_intervals)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/eval_performance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluate performance on a cv_set — eval_performance","text":"pred_intervals data.frame prediction intervals, output fit step. Must include: orgUnit, date, dataset, observed, predicted, quant_long, quantile_level","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/eval_performance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Evaluate performance on a cv_set — eval_performance","text":"dataset performance metrics assessment anlalysis datasets cv_set","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fill_seasonal.html","id":null,"dir":"Reference","previous_headings":"","what":"Fill in missing data via seasonally decomposed imputation — fill_seasonal","title":"Fill in missing data via seasonally decomposed imputation — fill_seasonal","text":"Fill missing data via seasonally decomposed imputation","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fill_seasonal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fill in missing data via seasonally decomposed imputation — fill_seasonal","text":"","code":"fill_seasonal(data_to_fix, data_col, group_col, verbose = FALSE)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fill_seasonal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fill in missing data via seasonally decomposed imputation — fill_seasonal","text":"data_to_fix dataframe columns impute, must contain date data_col names vector columns data fill group_col name column representing orgUnit grouping verbose whether print warnings. Default = FALSE","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fill_seasonal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fill in missing data via seasonally decomposed imputation — fill_seasonal","text":"original data_to_fix dataframe missing data imputed","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_arima.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit an ARIMAX model to a cv_set — fit_arima","title":"Fit an ARIMAX model to a cv_set — fit_arima","text":"Fucntion apply ARIMAX workflow orgUnit dataset","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_arima.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit an ARIMAX model to a cv_set — fit_arima","text":"","code":"fit_arima(   cv_set,   y_var,   pred_vars,   quantile_levels = c(0.01, 0.025, seq(0.05, 0.95, by = 0.05), 0.975, 0.99),   log_trans = FALSE )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_arima.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit an ARIMAX model to a cv_set — fit_arima","text":"cv_set list containing analysis assessment data.frames. One element output split_cv_rolling(). y_var character string y variable label pred_vars vector string column names predictor variables. Note static variables included ARIMAX model automatically removed. quantile_levels numeric vector quantiles use prediction intervals. Range 0-1. Default: c(0.01, 0.025, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 0.975, 0.99) log_trans whether log transform data help fit. Uses log(y+1). Default = FALSE","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_arima.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit an ARIMAX model to a cv_set — fit_arima","text":"data.frame prediction intervals analysis assessment data","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_arima_OneOrgUnit.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit an ARIMAX model to one orgUnit — fit_arima_OneOrgUnit","title":"Fit an ARIMAX model to one orgUnit — fit_arima_OneOrgUnit","text":"Fit ARIMAX model one orgUnit","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_arima_OneOrgUnit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit an ARIMAX model to one orgUnit — fit_arima_OneOrgUnit","text":"","code":"fit_arima_OneOrgUnit(   train_df,   test_df,   pred_vars,   quantile_levels,   return_model = FALSE,   log_trans = FALSE )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_arima_OneOrgUnit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit an ARIMAX model to one orgUnit — fit_arima_OneOrgUnit","text":"train_df dataframe analysis data test_df dataframe assessment data pred_vars predictor variables include quantile_levels quantiles needed prediction intervals (assessment ) return_model whether return ARIMA model, mostly used debugging. Default = FALSE log_trans whether log transform data help fit. Uses log(y+1). Default = FALSE","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_arima_OneOrgUnit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit an ARIMAX model to one orgUnit — fit_arima_OneOrgUnit","text":"dataframe prediction intervals analysis assessment data","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_glm_nb.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a negative binomial GLM to a cv_set — fit_glm_nb","title":"Fit a negative binomial GLM to a cv_set — fit_glm_nb","text":"Fit negative binomial GLM cv_set","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_glm_nb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a negative binomial GLM to a cv_set — fit_glm_nb","text":"","code":"fit_glm_nb(   cv_set,   y_var,   id_vars,   pred_vars,   return_model = FALSE,   quantile_levels = c(0.01, 0.025, seq(0.05, 0.95, by = 0.05), 0.975, 0.99) )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_glm_nb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a negative binomial GLM to a cv_set — fit_glm_nb","text":"cv_set list object containing analysis assessment data.frames y_var string name column observed values id_vars names columns used keys/ids data.frames pred_vars vector string predictor variables use model return_model whether return ranger model object. Default  = FALSE. quantile_levels quantile levels use predicted via quantile regression. Default =  c(0.01,0.025, seq(0.05,0.95, = 0.05), 0.975, 0.99)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_glm_nb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a negative binomial GLM to a cv_set — fit_glm_nb","text":"dataframe prediction intervals","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_inla.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit an INLA model to one cv_set and get prediction intervals — fit_inla","title":"Fit an INLA model to one cv_set and get prediction intervals — fit_inla","text":"Fit INLA model one cv_set get prediction intervals","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_inla.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit an INLA model to one cv_set and get prediction intervals — fit_inla","text":"","code":"fit_inla(   cv_set,   y_var,   pred_vars,   id_vars,   reff_var = NULL,   hyper_priors = list(prec.unstruct = c(1, 5e-04), prec.spatial = c(1, 5e-04),     prec.timerw1 = c(1, 0.01)),   return_model = FALSE,   quantile_levels = c(0.01, 0.025, seq(0.05, 0.95, by = 0.05), 0.975, 0.99),   sample_pi = FALSE,   W_orgUnit )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_inla.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit an INLA model to one cv_set and get prediction intervals — fit_inla","text":"cv_set list object containing analysis assessment data.frames y_var string name column observed values pred_vars vector string predictor variables use model id_vars names columns used keys/ids data.frames reff_var string formula random effects hyper_priors priors spatial temporal random effects return_model whether return INLA model addition predictions quantile_levels quantile levels use predicted via quantile regression. Default =  c(0.01,0.025, seq(0.05,0.95, = 0.05), 0.975, 0.99) sample_pi whether estimate prediction intervals sampling posterior. Default (FALSE) uses trick put error iid random effect. W_orgUnit graph orgUnit use spatial structure'","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_inla.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit an INLA model to one cv_set and get prediction intervals — fit_inla","text":"dataframe predictions intervals","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_naive.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a naive model to a cv_set — fit_naive","title":"Fit a naive model to a cv_set — fit_naive","text":"Fit naive model cv_set","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_naive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a naive model to a cv_set — fit_naive","text":"","code":"fit_naive(cv_set, y_var, group_vars = c(\"orgUnit\", \"month_season\"))"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_naive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a naive model to a cv_set — fit_naive","text":"cv_set list object containing analysis assessment data.frames y_var string name column observed values group_vars string vector names columns used group means. Usually refers month year orgUnit.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_naive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a naive model to a cv_set — fit_naive","text":"data.frame prediction intervals observed values containing columns group_vars whether data analysis assessment","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_ranger.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a ranger Random Forest model to a cv_set — fit_ranger","title":"Fit a ranger Random Forest model to a cv_set — fit_ranger","text":"Fit ranger Random Forest model cv_set","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_ranger.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a ranger Random Forest model to a cv_set — fit_ranger","text":"","code":"fit_ranger(   cv_set,   y_var,   id_vars,   pred_vars,   hyper_control = list(mtry = NULL, min.node.size = NULL, num.trees = 500),   importance = \"none\",   quantile_levels = c(0.01, 0.025, seq(0.05, 0.95, by = 0.05), 0.975, 0.99),   return_model = FALSE )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_ranger.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a ranger Random Forest model to a cv_set — fit_ranger","text":"cv_set list object containing analysis assessment data.frames y_var string name column observed values id_vars names columns used keys/ids data.frames pred_vars vector string predictor variables use model hyper_control hyperparameters use model, either list named vector format. Defaults ranger defaults importance method estimate variable importance. Default = 'none' means variable importance estimated quantile_levels quantile levels use predicted via quantile regression. Default =  c(0.01,0.025, seq(0.05,0.95, = 0.05), 0.975, 0.99) return_model whether return ranger model object. Default  = FALSE.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/fit_ranger.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a ranger Random Forest model to a cv_set — fit_ranger","text":"prediction intervals analysis assessment data list containing model object prediction intervals, return_model = TRUE","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_arima_pi.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal function for estimating prediction intervals from ARIMAX model — get_arima_pi","title":"Internal function for estimating prediction intervals from ARIMAX model — get_arima_pi","text":"Internal function estimating prediction intervals ARIMAX model","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_arima_pi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal function for estimating prediction intervals from ARIMAX model — get_arima_pi","text":"","code":"get_arima_pi(arima_mod, quantile_levels, h = 3, xreg = NULL)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_arima_pi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal function for estimating prediction intervals from ARIMAX model — get_arima_pi","text":"arima_mod ARIMAX model object quantile_levels quantile levels estimate prediction intervals. Numeric 0-1 h Arima forecast horizon, months. Default = 3 xreg corresponds exogeneous variables ARIMAX model (optional)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_arima_pi.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal function for estimating prediction intervals from ARIMAX model — get_arima_pi","text":"data.frame prediction intervals columns date, prediction, quantile, quant_long. assessment data.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_cv_subsets.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal function to format cv_set for analysis — get_cv_subsets","title":"Internal function to format cv_set for analysis — get_cv_subsets","text":"Internal function format cv_set analysis","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_cv_subsets.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal function to format cv_set for analysis — get_cv_subsets","text":"","code":"get_cv_subsets(cv_set, y_var, pred_vars = NULL, remove_NA = FALSE)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_cv_subsets.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal function to format cv_set for analysis — get_cv_subsets","text":"cv_set list analysis assessment data.frames y_var name variable predict pred_vars predictor variables used model, grouping variables case fit_naive(). Default = NULL remove_NA whether remove missing y observations analysis data. Default = FALSE","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_cv_subsets.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal function to format cv_set for analysis — get_cv_subsets","text":"list analysis assess dataframes","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_inla_pi.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to calculate and format posterior prediction distributions from INLA using random error trick — get_inla_pi","title":"Function to calculate and format posterior prediction distributions from INLA using random error trick — get_inla_pi","text":"One way calculate PI INLA model appropriate error fit random error term observation. takes output estimate PIs.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_inla_pi.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to calculate and format posterior prediction distributions from INLA using random error trick — get_inla_pi","text":"","code":"get_inla_pi(inla_marginal, quantile_levels, id_df)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_inla_pi.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to calculate and format posterior prediction distributions from INLA using random error trick — get_inla_pi","text":"inla_marginal output marginals.fitted.values INLA model one observation quantile_levels quantiles want estimate interval id_df one row dataframe containing id variables true_value observation","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_inla_pi_sample.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to calculate and format posterior prediction distributions from INLA via posterior sampling — get_inla_pi_sample","title":"Function to calculate and format posterior prediction distributions from INLA via posterior sampling — get_inla_pi_sample","text":"Function calculate format posterior prediction distributions INLA via posterior sampling","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_inla_pi_sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to calculate and format posterior prediction distributions from INLA via posterior sampling — get_inla_pi_sample","text":"","code":"get_inla_pi_sample(inla_post_sample, quantile_levels, id_df)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_inla_pi_sample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to calculate and format posterior prediction distributions from INLA via posterior sampling — get_inla_pi_sample","text":"inla_post_sample samples one predictor (often output inla.posterior.sample.eval) quantile_levels quantiles want estimate interval id_df one row dataframe containing id variables true_value observation","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_wis.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Weighted Interval Score — get_wis","title":"Calculate Weighted Interval Score — get_wis","text":"Internal function use wis scoringutils","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_wis.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Weighted Interval Score — get_wis","text":"","code":"get_wis(pred_df)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/get_wis.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Weighted Interval Score — get_wis","text":"pred_df data.frame predictions included observed, predicted quantile_level","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_arima.html","id":null,"dir":"Reference","previous_headings":"","what":"Investigate variables from ARIMAX model — inv_variables_arima","title":"Investigate variables from ARIMAX model — inv_variables_arima","text":"Investigate variables ARIMAX model","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_arima.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Investigate variables from ARIMAX model — inv_variables_arima","text":"","code":"inv_variables_arima(cv_set, y_var, pred_vars, var_scales)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_arima.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Investigate variables from ARIMAX model — inv_variables_arima","text":"cv_set list containing analysis assessment data.frames. One element output split_cv_rolling(). y_var character string y variable label pred_vars vector string column names predictor variables. Note static variables included ARIMAX model automatically removed. var_scales data.frame centering scaling values predictor variables","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_arima.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Investigate variables from ARIMAX model — inv_variables_arima","text":"list variable importance data counter-factual plots","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_glm_nb.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate variable importance and counter-factual plots of a glm.nb model — inv_variables_glm_nb","title":"Estimate variable importance and counter-factual plots of a glm.nb model — inv_variables_glm_nb","text":"Estimate variable importance counter-factual plots glm.nb model","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_glm_nb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate variable importance and counter-factual plots of a glm.nb model — inv_variables_glm_nb","text":"","code":"inv_variables_glm_nb(   cv_set,   y_var,   id_vars,   pred_vars,   var_scales,   constant_org = NULL,   constant_date = NULL,   nsim = 50 )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_glm_nb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate variable importance and counter-factual plots of a glm.nb model — inv_variables_glm_nb","text":"cv_set list object containing analysis assessment data.frames y_var string name column observed values id_vars names columns used keys/ids data.frames pred_vars vector string predictor variables use model var_scales data.frame containing centering scaling parameters variables constant_org orgUnit use counterfactual plots. NULL (default), chooses one random constant_date whcih date use counterfactual plots. NULL (default), set median analysis data. nsim number simulations use variable importance permutation. Default = 50.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_glm_nb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate variable importance and counter-factual plots of a glm.nb model — inv_variables_glm_nb","text":"list containing variable importance scores list dataframes containing data counterfactual plots element corresponding variable","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_inla.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate variable importance and partial dependence plots of a INLA model — inv_variables_inla","title":"Estimate variable importance and partial dependence plots of a INLA model — inv_variables_inla","text":"Estimate variable importance partial dependence plots  INLA model","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_inla.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate variable importance and partial dependence plots of a INLA model — inv_variables_inla","text":"","code":"inv_variables_inla(   cv_set,   y_var,   pred_vars,   reff_var = NULL,   id_vars,   hyper_priors = list(prec.unstruct = c(1, 5e-04), prec.spatial = c(1, 5e-04),     prec.timerw1 = c(1, 0.01)),   W_orgUnit,   var_scales,   constant_org,   constant_date,   seed = 8675309,   nsims = 1 )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_inla.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate variable importance and partial dependence plots of a INLA model — inv_variables_inla","text":"cv_set list object containing analysis assessment data.frames y_var string name column observed values pred_vars vector string predictor variables use model reff_var string formula random effects id_vars names columns used keys/ids data.frames hyper_priors priors spatial temporal random effects W_orgUnit graph orgUnit use spatial structure' var_scales data.frame containing centering scaling parameters variables constant_org orgUnit use counterfactual plots constant_date date use counterfactual plots seed seed use reproducability. Default = 8675309 nsims number simulations run. Default = 1","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_inla.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate variable importance and partial dependence plots of a INLA model — inv_variables_inla","text":"list containing variable importance scores list dataframes containing data pdp plots element corresponding variable","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_ranger.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate variable importance and partial dependence plots of a ranger model — inv_variables_ranger","title":"Estimate variable importance and partial dependence plots of a ranger model — inv_variables_ranger","text":"Estimate variable importance partial dependence plots ranger model","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_ranger.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate variable importance and partial dependence plots of a ranger model — inv_variables_ranger","text":"","code":"inv_variables_ranger(   cv_set,   y_var,   id_vars,   pred_vars,   hyper_control = list(mtry = NULL, min.node.size = NULL, num.trees = 500),   var_scales )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_ranger.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate variable importance and partial dependence plots of a ranger model — inv_variables_ranger","text":"cv_set list object containing analysis assessment data.frames y_var string name column observed values id_vars names columns used keys/ids data.frames pred_vars vector string predictor variables use model hyper_control hyperparameters use model, either list named vector format. Defaults ranger defaults var_scales data.frame containing centering scaling parameters variables","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/inv_variables_ranger.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate variable importance and partial dependence plots of a ranger model — inv_variables_ranger","text":"list containing variable importance scores list dataframes containing data pdp plots element corresponding variable","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_counterfactual.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot multiple counterfactual plots from the list of cf_data using ggplot — plot_counterfactual","title":"Plot multiple counterfactual plots from the list of cf_data using ggplot — plot_counterfactual","text":"Plot multiple counterfactual plots list cf_data using ggplot","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_counterfactual.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot multiple counterfactual plots from the list of cf_data using ggplot — plot_counterfactual","text":"","code":"plot_counterfactual(cf_list, y_range = NULL)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_counterfactual.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot multiple counterfactual plots from the list of cf_data using ggplot — plot_counterfactual","text":"cf_list list counterfactual data.frames. Names correspond variable labels y_range range y_variable use limit plots","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_counterfactual.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot multiple counterfactual plots from the list of cf_data using ggplot — plot_counterfactual","text":"list plots plotted patchwork::wrap_plots","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_counterfactual_one.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot one counterfactual plot from models using ggplot — plot_counterfactual_one","title":"Plot one counterfactual plot from models using ggplot — plot_counterfactual_one","text":"Plot one counterfactual plot models using ggplot","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_counterfactual_one.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot one counterfactual plot from models using ggplot — plot_counterfactual_one","text":"","code":"plot_counterfactual_one(cf_data, var_label, y_range = NULL)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_counterfactual_one.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot one counterfactual plot from models using ggplot — plot_counterfactual_one","text":"cf_data counterfactual data frame var_label label used predictor variable y_range range y_variable use limit plots","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_predictions.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot predictions and PI ribbon with ggplot2 — plot_predictions","title":"Plot predictions and PI ribbon with ggplot2 — plot_predictions","text":"Plot predictions PI ribbon ggplot2","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_predictions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot predictions and PI ribbon with ggplot2 — plot_predictions","text":"","code":"plot_predictions(pred_df, quantile_ribbon = c(0.05, 0.95))"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_predictions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot predictions and PI ribbon with ggplot2 — plot_predictions","text":"pred_df data.frame prediction intervals quantile_ribbon quantile levels use ribbon","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/plot_predictions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot predictions and PI ribbon with ggplot2 — plot_predictions","text":"ggplot object","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/prep_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare case data and predictor variables for forecast models — prep_data","title":"Prepare case data and predictor variables for forecast models — prep_data","text":"Prepare case data predictor variables forecast models","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/prep_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare case data and predictor variables for forecast models — prep_data","text":"","code":"prep_data(   raw_data,   y_var,   lagged_vars,   scaled_vars,   lag_n = 3,   graph_poly = NULL )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/prep_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare case data and predictor variables for forecast models — prep_data","text":"raw_data data.frame containing variables y_var name variable predict lagged_vars string vector names variables lag scaled_vars string vector names variables scale lag_n number months lag lagged variables. Default = 3. graph_poly sf object used create graph INLA model (optional). Default = NULL.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/prep_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare case data and predictor variables for forecast models — prep_data","text":"list cleaned data, spatial graph INLA (null), scale centering factors used treatment","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/retry_arima.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal function to iteratively fit an ARIMAX model — retry_arima","title":"Internal function to iteratively fit an ARIMAX model — retry_arima","text":"function fits ARIMAX model iteratively. starts e exogeneous variables error thrown, removes last one list tries refit. repeats process model successfully fit. models fit, ARIMA model (without exogenous variables) returned. model fit via forecast::auto.arima()","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/retry_arima.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal function to iteratively fit an ARIMAX model — retry_arima","text":"","code":"retry_arima(train_df, pred_vars, this_y_ts)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/retry_arima.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal function to iteratively fit an ARIMAX model — retry_arima","text":"train_df data.frame data used train model pred_vars vector character names exogeneous variables this_y_ts time series object observed y variables train_df. Created via stats::ts().","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/retry_arima.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal function to iteratively fit an ARIMAX model — retry_arima","text":"fit ARIMAX ARIMA model, fit via. auto.arima.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/run_inla_config.html","id":null,"dir":"Reference","previous_headings":"","what":"Configuration for an INLA model An internal function to run a configured INLA model — run_inla_config","title":"Configuration for an INLA model An internal function to run a configured INLA model — run_inla_config","text":"Configuration INLA model internal function run configured INLA model","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/run_inla_config.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Configuration for an INLA model An internal function to run a configured INLA model — run_inla_config","text":"","code":"run_inla_config(   formula,   data,   family = \"zeroinflatednbinomial1\",   config = T,   verbose = T )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/run_inla_config.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Configuration for an INLA model An internal function to run a configured INLA model — run_inla_config","text":"formula forumula y ~x format model data data used model family family model fit. Default = \"zeroinflatednbinomial1\" config whetehr use config control.compute step. Default = TRUE verbose whether fitting verbose. Default = TRUE","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/sample_fixed_posteriors.html","id":null,"dir":"Reference","previous_headings":"","what":"Sample from fixed-effect posteriors — sample_fixed_posteriors","title":"Sample from fixed-effect posteriors — sample_fixed_posteriors","text":"Sample fixed-effect posteriors","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/sample_fixed_posteriors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sample from fixed-effect posteriors — sample_fixed_posteriors","text":"","code":"sample_fixed_posteriors(inla_model, n_samp = 10000)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/sample_fixed_posteriors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sample from fixed-effect posteriors — sample_fixed_posteriors","text":"inla_model INLA model object n_samp number samples take posterior","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/sample_preds.html","id":null,"dir":"Reference","previous_headings":"","what":"Utility function to get weighted means of predictions — sample_preds","title":"Utility function to get weighted means of predictions — sample_preds","text":"Utility function get weighted means predictions","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/sample_preds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Utility function to get weighted means of predictions — sample_preds","text":"","code":"sample_preds(predicted, weight)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/sample_preds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Utility function to get weighted means of predictions — sample_preds","text":"predicted vector predicted values weight vector weights","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/sample_preds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Utility function to get weighted means of predictions — sample_preds","text":"mean prediction list","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/split_cv_rolling.html","id":null,"dir":"Reference","previous_headings":"","what":"Create cv folds within a dataset using rolling origin method — split_cv_rolling","title":"Create cv folds within a dataset using rolling origin method — split_cv_rolling","text":"Create cv folds within dataset using rolling origin method","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/split_cv_rolling.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create cv folds within a dataset using rolling origin method — split_cv_rolling","text":"","code":"split_cv_rolling(   data_to_split,   start_date = NULL,   month_analysis = 48,   month_assess = 3 )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/split_cv_rolling.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create cv folds within a dataset using rolling origin method — split_cv_rolling","text":"data_to_split data frame want create folds , must include date column start_date date folds start, Date class. default NULL = first date dataset month_analysis number months include analysis sets. Default = 48 month_assess number months include assessment sets. Default = 3","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/split_cv_rolling.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create cv folds within a dataset using rolling origin method — split_cv_rolling","text":"list datasets including analysis assessment set nested list object","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/split_stratified.html","id":null,"dir":"Reference","previous_headings":"","what":"Split the dataset into a training and testing set — split_stratified","title":"Split the dataset into a training and testing set — split_stratified","text":"Split dataset training testing set","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/split_stratified.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Split the dataset into a training and testing set — split_stratified","text":"","code":"split_stratified(cvdata_list)"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/split_stratified.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Split the dataset into a training and testing set — split_stratified","text":"cvdata_list list cv folds (output split_cv_rolling)","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/split_stratified.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Split the dataset into a training and testing set — split_stratified","text":"list cv folds used training (\"train_data\") testing (\"test_data\")","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/split_stratified.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Split the dataset into a training and testing set — split_stratified","text":"Dataset stratified year, assessment period beginning four months every year","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/train_models.html","id":null,"dir":"Reference","previous_headings":"","what":"Run full train_model workflow using multiple modeling approaches — train_models","title":"Run full train_model workflow using multiple modeling approaches — train_models","text":"Run full train_model workflow using multiple modeling approaches","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/train_models.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run full train_model workflow using multiple modeling approaches — train_models","text":"","code":"train_models(   prep_output,   models,   y_var,   pred_vars,   id_vars = c(\"orgUnit\", \"date\"),   results_dir = NULL,   tune = NULL,   model_configs )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/train_models.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run full train_model workflow using multiple modeling approaches — train_models","text":"prep_output output prep_data models vector models fit. Options: naive, arimax, glm_nb, ranger, inla y_var character. name variable predict pred_vars character vector predictor variables. used models results_dir directory save model results quarto document . NULL, temporary directory used tune string vector containing names models tune. Options = ranger model_configs Optional list configurations model. Name element list match model name. See ensemble_forecast info.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/train_models.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run full train_model workflow using multiple modeling approaches — train_models","text":"saves model outputs results_dir specified. Creates quarto doc model outputs","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/tune_ranger.html","id":null,"dir":"Reference","previous_headings":"","what":"Tune a ranger random forest model — tune_ranger","title":"Tune a ranger random forest model — tune_ranger","text":"Tune ranger random forest model","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/tune_ranger.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tune a ranger random forest model — tune_ranger","text":"","code":"tune_ranger(   cvfold_list,   metric = \"wape\",   y_var,   id_vars,   pred_vars,   tune_grid = NULL )"},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/tune_ranger.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tune a ranger random forest model — tune_ranger","text":"cvfold_list nested list cv_sets, analysis assessment metric metric use select best fit. Options output eval_performance. y_var string name column observed values id_vars names columns used keys/ids data.frames pred_vars vector string predictor variables use model tune_grid grid parameters tune , column values parameter. Default (NULL) create one within function.","code":""},{"path":"https://pivot-madagascar.github.io/PRIDEC-package/reference/tune_ranger.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tune a ranger random forest model — tune_ranger","text":"vector best fitting parameters","code":""}]
