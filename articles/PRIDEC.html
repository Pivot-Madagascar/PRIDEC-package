<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>PRIDEC • PRIDEC</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="PRIDEC">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PRIDEC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/PRIDEC.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>PRIDEC</h1>
            
      

      <div class="d-none name"><code>PRIDEC.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pivot-madagascar.github.io/PRIDEC-package/">PRIDEC</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>The PRIDE-C package serves to facilitate the forecasting of
infectious diseases using data from <a href="https://dhis2.org/" class="external-link">DHIS2</a>. It follows a workflow of 1. Data
processing 2. Model training 3. Forecasting</p>
<p>This demo will illustrate the process of forecasting a disease across
multiple organisation units (e.g. administrative zones) three months
into the future based on climatic variables.</p>
<div class="section level2">
<h2 id="the-demo-data">The demo data<a class="anchor" aria-label="anchor" href="#the-demo-data"></a>
</h2>
<p>The demo data is simulated malaria case data from Ifanadiana
District, Madagascar collected at the level of the health center. It
includes information data on monthly case counts, rainfall, temperature,
socio-economic levels, elevation, mosquito net use, and geographic
isolation.</p>
<p>Generally, the value we want to predict is referred to as the
<code>y_var</code> in the API calls, while the predictor variables are
referred to as <code>pred_vars</code>.</p>
<p>It includes an associated dataset of spatial polygons representing
each health facility catchment.</p>
<p>Below is a plot of the time series for four example health
centers.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"demo_malaria"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"demo_polygon"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">demo_malaria</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">orgUnit</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">orgUnit</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">period</span>,<span class="st">"01"</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"%Y%m%d"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">n_case</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">orgUnit</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Number of cases"</span><span class="op">)</span></span></code></pre></div>
<p><img src="PRIDEC_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="data-processing">Data Processing<a class="anchor" aria-label="anchor" href="#data-processing"></a>
</h2>
<div class="section level3">
<h3 id="prep_data">
<code>prep_data()</code><a class="anchor" aria-label="anchor" href="#prep_data"></a>
</h3>
<p>The first step is to process and clean the data. The PRIDE-C
forecasting workflow has four steps to prepare the data for the
model:</p>
<ol style="list-style-type: decimal">
<li>
<strong>lag predictors</strong>: in order to predict into the
future, we must use lagged values of the predictor variables, so that
the number of cases is predicted as a function of the variable at time
<code>t-lag</code>
</li>
<li>
<strong>normalize predictors</strong>: all of the predictor
variables are centered and scaled to help with model convergence</li>
<li>
<strong>Impute missing predictors</strong>: missing values in the
predictor variables are imputed via a seasonal imputation</li>
<li>
<strong>create spatial structure</strong>: one of the model fitting
approaches (INLA) uses the spatial structure of the data to help
predict. This structure is created via a matrix that identifies the
neighbors of each polygon.</li>
</ol>
<p>The data preparation step is done via the <code><a href="../reference/prep_data.html">prep_data()</a></code>
function. We will choose to lag all of the dynamic predictor variables
and scale all of the predictor variables.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prep_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep_data.html">prep_data</a></span><span class="op">(</span>raw_data <span class="op">=</span> <span class="va">demo_malaria</span>,</span>
<span>                      y_var <span class="op">=</span> <span class="st">"n_case"</span>,</span>
<span>                      lagged_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pev"</span>, <span class="st">"rain_mm"</span>, <span class="st">"temp_c"</span><span class="op">)</span>,</span>
<span>                      scaled_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pev"</span>, <span class="st">"rain_mm"</span>, <span class="st">"temp_c"</span>,</span>
<span>                                      <span class="st">"wealth_index"</span>, <span class="st">"elevation"</span>,</span>
<span>                                      <span class="st">"time_to_district"</span><span class="op">)</span>,</span>
<span>                      lag_n <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                      graph_poly <span class="op">=</span> <span class="va">demo_polygon</span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'quantmod':</span></span>
<span><span class="co">#&gt;   method            from</span></span>
<span><span class="co">#&gt;   as.zoo.data.frame zoo</span></span></code></pre></div>
<p><code><a href="../reference/prep_data.html">prep_data()</a></code> returns three elements in a list:</p>
<ul>
<li>
<code>W_graph</code>: object containing the spatial structure of
data required by INLA</li>
<li>
<code>data_prep</code>: data.frame of the cleaned and processed
data</li>
<li>
<code>scale_factors</code>: data.frame of center and scaling factors
used to normalize the predictor variables. This will be used when
explorign variables later.</li>
</ul>
</div>
<div class="section level3">
<h3 id="split_cv_rolling">
<code>split_cv_rolling()</code><a class="anchor" aria-label="anchor" href="#split_cv_rolling"></a>
</h3>
<p>Once the data is prepared, it needs to be split into multiple
cross-validation sets (<code>cv_set</code>). Each <code>cv_set</code>
contains an <code>analysis</code> and <code>assessment</code> dataset
that will be used in model training. These <code>cv_set</code>s are
created via rolling origin splits (<a href="https://www.sciencedirect.com/science/article/abs/pii/S0169207000000650?via%3Dihub" class="external-link">Tashman
2000</a>.)</p>
<p>Each <code>cv_set</code> can be thought of as an individual test of
the workflow’s ability to forecast, where a model is fit to the
<code>analysis</code> data following the specified
<code>pred_vars</code> and model parameters and performance is assessed
on the <code>assessment</code> data.Generally, the <code>analysis</code>
data corresponds to a longer period of historical data used for
training, while the <code>assessment</code> data corresponds to the
actual forecast horizon relevant to the user.</p>
<p>We will use 5 years of <code>analysis</code> data to train the model,
and 3 months of <code>assessment</code> data to test it. The function
<code>split_cv_rolling</code> will return a list, where each element
corresponds to one <code>cv_set</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">splits_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/split_cv_rolling.html">split_cv_rolling</a></span><span class="op">(</span><span class="va">prep_output</span><span class="op">$</span><span class="va">data_prep</span>,</span>
<span>                               month_analysis <span class="op">=</span> <span class="fl">60</span>,</span>
<span>                               month_assess <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>We can inspect a <code>cv_set</code> to better understand the
structure of the data:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">splits_out</span><span class="op">[[</span><span class="fl">24</span><span class="op">]</span><span class="op">]</span>, <span class="va">head</span><span class="op">)</span></span>
<span><span class="co">#&gt; $analysis</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 28</span></span></span>
<span><span class="co">#&gt;   orgUnit   n_case   pev rain_mm temp_c wealth_index elevation LLIN_use csb_type</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> CSB1 AMB…      2  14.4   0       22.4         2.53      381.    0.290 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> CSB1 AMB…      5  15.4   0.527   24.5         2.53      381.    0.290 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> CSB1 AMB…      2  12.7 164.      25.1         2.53      381.    0.290 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> CSB1 AMB…     16  15.7 309.      25.8         2.53      381.    0.290 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> CSB1 AMB…     29  14.3 289.      25.2         2.53      381.    0.290 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> CSB1 AMB…      1  13.8 169.      25.1         2.53      381.    0.290 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 19 more variables: time_to_district &lt;dbl&gt;, LLIN_wane &lt;dbl&gt;, period &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   date &lt;date&gt;, pev_lag &lt;dbl&gt;, rain_mm_lag &lt;dbl&gt;, temp_c_lag &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   pevsc &lt;dbl&gt;, pev_lagsc &lt;dbl&gt;, rain_mmsc &lt;dbl&gt;, rain_mm_lagsc &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   temp_csc &lt;dbl&gt;, temp_c_lagsc &lt;dbl&gt;, wealth_indexsc &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   elevationsc &lt;dbl&gt;, time_to_districtsc &lt;dbl&gt;, month_season &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   month_num &lt;dbl&gt;, org_ID &lt;int&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $assessment</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 28</span></span></span>
<span><span class="co">#&gt;   orgUnit   n_case   pev rain_mm temp_c wealth_index elevation LLIN_use csb_type</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> CSB1 AMB…      3  17.3     0     21.9         2.53      381.    0.290 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> CSB1 AMB…      7  26.5    65.9   25.0         2.53      381.    0.290 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> CSB1 AMB…     11  23.1   156.    26.0         2.53      381.    0.290 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> CSB1 AMB…      5  13.9     0     20.9         2.82      614.    0.318 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> CSB1 AMB…      3  21.3    66.9   24.2         2.82      614.    0.318 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> CSB1 AMB…     11  17.3   188.    24.9         2.82      614.    0.318 CSB1    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 19 more variables: time_to_district &lt;dbl&gt;, LLIN_wane &lt;dbl&gt;, period &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   date &lt;date&gt;, pev_lag &lt;dbl&gt;, rain_mm_lag &lt;dbl&gt;, temp_c_lag &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   pevsc &lt;dbl&gt;, pev_lagsc &lt;dbl&gt;, rain_mmsc &lt;dbl&gt;, rain_mm_lagsc &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   temp_csc &lt;dbl&gt;, temp_c_lagsc &lt;dbl&gt;, wealth_indexsc &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   elevationsc &lt;dbl&gt;, time_to_districtsc &lt;dbl&gt;, month_season &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   month_num &lt;dbl&gt;, org_ID &lt;int&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="model-training">Model Training<a class="anchor" aria-label="anchor" href="#model-training"></a>
</h2>
<div class="section level3">
<h3 id="modeling-approaches">Modeling approaches<a class="anchor" aria-label="anchor" href="#modeling-approaches"></a>
</h3>
<p>There are five modeling approaches built into the PRIDE-C forecasting
workflow:</p>
<div class="section level4">
<h4 id="naive">naive<a class="anchor" aria-label="anchor" href="#naive"></a>
</h4>
<p>The naive model can be thought of as the null model with which to
compare other forecasting approaches to. It creates forecasts equal to
historical averages based on grouping variables, by default the month of
the year and <code>orgUnit</code>. It does not use any predictor
variables in predictions.</p>
</div>
<div class="section level4">
<h4 id="arimax">arimax<a class="anchor" aria-label="anchor" href="#arimax"></a>
</h4>
<p>The ARIMAX model is an ARIMA model fit with exogeneous variables fit
individually to each <code>orgUnit</code>. The exogeneous variables must
be dynamic and at the same temporal resolution at the case data. Each
ARIMAX model is fit using the <code><a href="https://pkg.robjhyndman.com/forecast/reference/auto.arima.html" class="external-link">forecast::auto.arima()</a></code>
function. Initial models are fit using the full list of provided
<code>pred_vars</code>, which are iteratively removed (beginning at the
end of the list) until a model successfully converges. Data are
log-transformed within the function to help with fitting, but forecasts
are provided on the response-scale.</p>
</div>
<div class="section level4">
<h4 id="glm_nb">glm_nb<a class="anchor" aria-label="anchor" href="#glm_nb"></a>
</h4>
<p>A generalized linear model with a negative binomial distribution can
be fit to the full dataset. It includes a variable to control for the
<code>orgUnit</code> and month of the year, in addition to the specified
predictor variables. It can be thought of as the naive model with
exogenous predictors. Predictor variables can be either dynamic or
constant within an <code>orgUnit</code>, allowing for the inclusion of
socio-demographic or topographical variables. The model is fit via the
<code><a href="https://rdrr.io/pkg/MASS/man/glm.nb.html" class="external-link">MASS::glm.nb()</a></code> function.</p>
</div>
<div class="section level4">
<h4 id="ranger">ranger<a class="anchor" aria-label="anchor" href="#ranger"></a>
</h4>
<p>A random forest quantile regression model is implemented via the <a href="https://cran.r-project.org/web/packages/ranger/index.html" class="external-link"><code>ranger</code>
package</a>. This package was chosen for its ability to apply quantile
regression, its speed, and high-performance with default
hyper-parameters. Three hyper-parameters (<code>m.try</code>,
<code>min.node.size</code>, and <code>num.trees</code>) can be tuned
with the <code><a href="../reference/tune_ranger.html">tune_ranger()</a></code> function. Predictor variables can be
either dynamic or constant within an <code>orgUnit</code>, allowing for
the inclusion of socio-demographic or topographical variables. It
includes a variable to control for the <code>orgUnit</code> and month of
the year, in addition to the specified predictor variables.</p>
</div>
<div class="section level4">
<h4 id="inla">inla<a class="anchor" aria-label="anchor" href="#inla"></a>
</h4>
<p>An approximate Bayesian model is fit via Integrated Nested Laplace
Approximation via the <a href="https://www.r-inla.org/" class="external-link"><code>inla</code> package</a>. Note that
this package is not available on CRAN and should be installed following
these <a href="https://www.r-inla.org/download-install" class="external-link">installation
instructions</a>.</p>
<p>This is the most computationally intense model, as it includes both
temporal and spatial random effect structures. The temporal random
effects are included via cyclical random walk with an annual
seasonality, nested within <code>orgUnit</code>. The spatial structure
is defined by a Besag-York-Mollié (BYM) model. This is an autoregressive
spatial model based on the neighborhood spatial structure of the
<code>orgUnits</code>. Priors can be provided for both random effects
via the <code>hyper_priors</code> argument to <code>fit_inla</code>. In
the future, functionality will be added to tune these
hyper-parameters.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="training-workflow">Training Workflow<a class="anchor" aria-label="anchor" href="#training-workflow"></a>
</h2>
<p>Each modeling approach follows the same training workflow:</p>
<ol style="list-style-type: decimal">
<li>
<code>tune_*</code>: tuning of hyperparameters (<code>ranger</code>
only)</li>
<li>
<code>fit_*</code>: fitting of models to multiple
<code>cv_set</code>s</li>
<li>
<code>eval_performance</code>: evaluation of models on
<code>analysis</code> and <code>assessment</code> datasets</li>
<li>
<code>inv_variables_*</code>: investigation of variable importance
scores and counterfactual plots to visualize the association with
predictor variables</li>
</ol>
<p>This workflow can be launched for multiple approaches at once and
returns a <code>quarto</code> report of model performance and variable
investigation via the <code>train_models</code> function.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michelle Evans.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
